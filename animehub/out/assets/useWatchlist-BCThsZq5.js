import{r as t}from"./react-vendor-DxNDjNG-.js";import{u as a,U as r}from"./ui-components-C5QItHIj.js";function e(){const[e,i]=t.useState([]),[s,o]=t.useState(!0),[c,n]=t.useState(null),{user:l}=a(),d=t.useCallback(async()=>{if(!l?.id)return i([]),void o(!1);try{o(!0),n(null);const t=await r.getUserWatchlist(l.id);i(t)}catch(t){n(t instanceof Error?t.message:"Failed to fetch watchlist")}finally{o(!1)}},[l?.id]);t.useEffect(()=>{d()},[d]);return{watchlist:e,loading:s,error:c,addToWatchlist:t.useCallback(async t=>{if(!l?.id)throw new Error("User not authenticated");try{await r.addToWatchlist(l.id,t),await d()}catch(a){throw new Error(a instanceof Error?a.message:"Failed to add to watchlist")}},[l?.id,d]),removeFromWatchlist:t.useCallback(async t=>{if(!l?.id)throw new Error("User not authenticated");try{await r.removeFromWatchlist(l.id,t),await d()}catch(a){throw new Error(a instanceof Error?a.message:"Failed to remove from watchlist")}},[l?.id,d]),isInWatchlist:t.useCallback(async t=>{if(!l?.id)return!1;try{return await r.isInWatchlist(l.id,t)}catch(a){return!1}},[l?.id]),refetch:d}}export{e as u};
//# sourceMappingURL=useWatchlist-BCThsZq5.js.map
