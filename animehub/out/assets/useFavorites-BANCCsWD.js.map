{"version":3,"file":"useFavorites-BANCCsWD.js","sources":["../../src/hooks/useFavorites.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { UserService } from '../services/userService';\r\nimport { useAuthContext } from '../contexts/AuthContext';\r\n\r\nexport function useFavorites() {\r\n  const [favorites, setFavorites] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const { user } = useAuthContext();\r\n\r\n  const fetchFavorites = useCallback(async () => {\r\n    if (!user?.id) {\r\n      setFavorites([]);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await UserService.getUserFavorites(user.id);\r\n      setFavorites(data);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch favorites');\r\n      console.error('Favorites fetch error:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [user?.id]);\r\n\r\n  useEffect(() => {\r\n    fetchFavorites();\r\n  }, [fetchFavorites]);\r\n\r\n  const addToFavorites = useCallback(async (animeId: string) => {\r\n    if (!user?.id) {\r\n      throw new Error('User not authenticated');\r\n    }\r\n\r\n    try {\r\n      await UserService.addToFavorites(user.id, animeId);\r\n      await fetchFavorites(); // Refresh the list\r\n    } catch (err) {\r\n      throw new Error(err instanceof Error ? err.message : 'Failed to add to favorites');\r\n    }\r\n  }, [user?.id, fetchFavorites]);\r\n\r\n  const removeFromFavorites = useCallback(async (animeId: string) => {\r\n    if (!user?.id) {\r\n      throw new Error('User not authenticated');\r\n    }\r\n\r\n    try {\r\n      await UserService.removeFromFavorites(user.id, animeId);\r\n      await fetchFavorites(); // Refresh the list\r\n    } catch (err) {\r\n      throw new Error(err instanceof Error ? err.message : 'Failed to remove from favorites');\r\n    }\r\n  }, [user?.id, fetchFavorites]);\r\n\r\n  const isInFavorites = useCallback(async (animeId: string) => {\r\n    if (!user?.id) return false;\r\n    \r\n    try {\r\n      return await UserService.isInFavorites(user.id, animeId);\r\n    } catch (err) {\r\n      console.error('Check favorites error:', err);\r\n      return false;\r\n    }\r\n  }, [user?.id]);\r\n\r\n  return {\r\n    favorites,\r\n    loading,\r\n    error,\r\n    addToFavorites,\r\n    removeFromFavorites,\r\n    isInFavorites,\r\n    refetch: fetchFavorites\r\n  };\r\n}\r\n"],"names":["useFavorites","favorites","setFavorites","useState","loading","setLoading","error","setError","user","useAuthContext","fetchFavorites","useCallback","async","id","data","UserService","getUserFavorites","err","Error","message","useEffect","addToFavorites","animeId","removeFromFavorites","isInFavorites","refetch"],"mappings":"iGAIO,SAASA,IACd,MAAOC,EAAWC,GAAgBC,EAAAA,SAAgB,KAC3CC,EAASC,GAAcF,EAAAA,UAAS,IAChCG,EAAOC,GAAYJ,EAAAA,SAAwB,OAC5CK,KAAEA,GAASC,IAEXC,EAAiBC,EAAAA,YAAYC,UACjC,IAAKJ,GAAMK,GAGT,OAFAX,EAAa,SACbG,GAAW,GAIb,IACEA,GAAW,GACXE,EAAS,MACT,MAAMO,QAAaC,EAAYC,iBAAiBR,EAAKK,IACrDX,EAAaY,EACf,OAASG,GACPV,EAASU,aAAeC,MAAQD,EAAIE,QAAU,4BAEhD,CAAA,QACEd,GAAW,EACb,GACC,CAACG,GAAMK,KAEVO,EAAAA,UAAU,KACRV,KACC,CAACA,IAuCJ,MAAO,CACLT,YACAG,UACAE,QACAe,eAzCqBV,cAAYC,MAAOU,IACxC,IAAKd,GAAMK,GACT,MAAM,IAAIK,MAAM,0BAGlB,UACQH,EAAYM,eAAeb,EAAKK,GAAIS,SACpCZ,GACR,OAASO,GACP,MAAM,IAAIC,MAAMD,aAAeC,MAAQD,EAAIE,QAAU,6BACvD,GACC,CAACX,GAAMK,GAAIH,IA+BZa,oBA7B0BZ,cAAYC,MAAOU,IAC7C,IAAKd,GAAMK,GACT,MAAM,IAAIK,MAAM,0BAGlB,UACQH,EAAYQ,oBAAoBf,EAAKK,GAAIS,SACzCZ,GACR,OAASO,GACP,MAAM,IAAIC,MAAMD,aAAeC,MAAQD,EAAIE,QAAU,kCACvD,GACC,CAACX,GAAMK,GAAIH,IAmBZc,cAjBoBb,cAAYC,MAAOU,IACvC,IAAKd,GAAMK,GAAI,OAAO,EAEtB,IACE,aAAaE,EAAYS,cAAchB,EAAKK,GAAIS,EAClD,OAASL,GAEP,OAAO,CACT,GACC,CAACT,GAAMK,KASRY,QAASf,EAEb"}