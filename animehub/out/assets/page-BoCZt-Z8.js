import{j as e,m as s}from"./animation-jvELU4qo.js";import{u as t,S as a}from"./ui-components-C5QItHIj.js";import{u as i,a as r,b as l}from"./index-BO68WmR0.js";import{u as n}from"./react-vendor-DxNDjNG-.js";import"./services-By9PCRKQ.js";import"./admin-I3YcsrSP.js";function c({data:t}){if(!t)return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(s=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-white/50 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded"})]})},s))});const a=[{title:"Total Users",value:t.totalUsers?.toLocaleString()||"0",icon:"ri-user-line",color:"blue",change:"+12.5%",changeType:"increase"},{title:"Total Anime",value:t.totalAnime?.toLocaleString()||"0",icon:"ri-movie-2-line",color:"green",change:"+8.2%",changeType:"increase"},{title:"Total Episodes",value:t.totalEpisodes?.toLocaleString()||"0",icon:"ri-play-circle-line",color:"purple",change:"+15.3%",changeType:"increase"},{title:"Active Users",value:t.activeUsers?.toLocaleString()||"0",icon:"ri-live-line",color:"red",change:"-2.1%",changeType:"decrease"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map((t,a)=>{return e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-white/50 p-6 hover:shadow-md transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${i=t.color,{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",red:"bg-red-100 text-red-600"}[i]}`,children:e.jsx("i",{className:`${t.icon} text-xl`})}),e.jsx("div",{className:"text-sm font-medium "+("increase"===t.changeType?"text-green-600":"text-red-600"),children:t.change})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:t.value}),e.jsx("p",{className:"text-slate-600 text-sm",children:t.title})]})]},t.title);var i})})}function d({activities:t}){if(!t)return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-white/50 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},s))})]});const a=e=>{switch(e){case"user_registration":return"ri-user-add-line";case"review":return"ri-star-line";case"episode_completed":return"ri-check-double-line";case"episode_watched":return"ri-play-circle-line";case"favorited":return"ri-heart-line";case"added":return"ri-bookmark-line";case"rated":return"ri-star-fill";case"anime_upload":return"ri-upload-line";case"report":return"ri-flag-line";case"server":return"ri-server-line";case"user_ban":return"ri-user-forbid-line";case"payment":return"ri-money-dollar-circle-line";case"system":return"ri-settings-line";case"content":return"ri-movie-2-line";default:return"ri-information-line"}},i=e=>{switch(e){case"success":return"text-green-600 bg-green-100";case"error":return"text-red-600 bg-red-100";case"warning":return"text-yellow-600 bg-yellow-100";case"info":return"text-blue-600 bg-blue-100";case"new":return"text-purple-600 bg-purple-100";default:return"text-slate-600 bg-slate-100"}};return e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-white/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 cursor-pointer",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:t.map((t,r)=>e.jsxs(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+.05*r},onClick:()=>(e=>{switch(e.type){case"user_registration":case"user_ban":window.REACT_APP_NAVIGATE("/admin/users");break;case"anime_upload":case"content":window.REACT_APP_NAVIGATE("/admin/anime")}})(t),className:"flex items-start space-x-4 p-3 rounded-lg hover:bg-slate-50/50 transition-colors duration-200 cursor-pointer group",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i(t.status||"info")}`,children:e.jsx("i",{className:`${a(t.type)} text-sm`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-slate-800 group-hover:text-slate-900",children:t.message||t.description||"Activity"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:t.time||t.timestamp||"Recently"})]}),e.jsx("i",{className:"ri-arrow-right-line text-slate-400 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all duration-200"})]},t.id||`activity-${r}`))}),0===t.length&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-history-line text-4xl text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-500",children:"No recent activity"})]})]})}function o({onAction:t}){return e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-white/50 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Quick Actions"}),e.jsx("div",{className:"space-y-3",children:[{id:"add_anime",title:"Add New Anime",description:"Upload new anime series",icon:"ri-add-circle-line",color:"bg-blue-500 hover:bg-blue-600",textColor:"text-blue-600"},{id:"manage_users",title:"Manage Users",description:"View and moderate users",icon:"ri-user-settings-line",color:"bg-green-500 hover:bg-green-600",textColor:"text-green-600"},{id:"view_reports",title:"View Reports",description:"Check content reports",icon:"ri-flag-line",color:"bg-yellow-500 hover:bg-yellow-600",textColor:"text-yellow-600"},{id:"system_settings",title:"System Settings",description:"Configure platform",icon:"ri-settings-3-line",color:"bg-purple-500 hover:bg-purple-600",textColor:"text-purple-600"}].map((a,i)=>e.jsxs(s.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+.1*i},onClick:()=>t(a.id),className:"w-full flex items-center space-x-4 p-4 rounded-lg border border-slate-200 hover:border-slate-300 hover:shadow-md transition-all duration-200 cursor-pointer group",children:[e.jsx("div",{className:`w-10 h-10 ${a.color} rounded-lg flex items-center justify-center text-white group-hover:scale-110 transition-transform duration-200`,children:e.jsx("i",{className:`${a.icon} text-lg`})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"font-medium text-slate-800 group-hover:text-slate-900",children:a.title}),e.jsx("p",{className:"text-sm text-slate-600",children:a.description})]}),e.jsx("i",{className:"ri-arrow-right-line text-slate-400 group-hover:text-slate-600 group-hover:translate-x-1 transition-all duration-200"})]},a.id))})]})}function m({health:t}){if(!t)return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-white/50 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"System Health"}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},s))})]});const a=e=>{switch(e){case"healthy":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";default:return"text-slate-600 bg-slate-100"}},i=e=>{switch(e){case"healthy":return"ri-check-line";case"warning":return"ri-error-warning-line";case"error":return"ri-close-line";default:return"ri-question-line"}},r=[{name:"Database",status:t.database_status,icon:"ri-database-2-line"},{name:"API",status:t.api_response_time<1e3?"healthy":"warning",icon:"ri-api-line"},{name:"Storage",status:t.storage_usage<80?"healthy":"warning",icon:"ri-hard-drive-line"},{name:"Connections",status:t.active_connections>0?"healthy":"error",icon:"ri-wifi-line"}],l=[{label:"Response Time",value:`${t.api_response_time}ms`,icon:"ri-speed-line"},{label:"Storage Usage",value:`${t.storage_usage}%`,icon:"ri-hard-drive-line"},{label:"Active Connections",value:t.active_connections.toLocaleString(),icon:"ri-user-line"},{label:"Error Rate",value:`${t.error_rate}%`,icon:"ri-error-warning-line"}];return e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-white/50 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"System Health"}),e.jsx("div",{className:"space-y-3 mb-6",children:r.map((t,r)=>e.jsxs(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+.1*r},className:"flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:border-slate-300 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:`${t.icon} text-slate-600`})}),e.jsx("span",{className:"font-medium text-slate-700",children:t.name})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${a(t.status)}`,children:[e.jsx("i",{className:i(t.status)}),e.jsx("span",{className:"capitalize",children:t.status})]})]},t.name))}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-4",children:"Performance Metrics"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map((t,a)=>e.jsxs(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.8+.1*a},className:"text-center p-3 bg-slate-50/50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx("i",{className:`${t.icon} text-blue-600 text-sm`})}),e.jsx("p",{className:"text-lg font-semibold text-slate-800",children:t.value}),e.jsx("p",{className:"text-xs text-slate-600",children:t.label})]},t.label))})]}),e.jsx("div",{className:"border-t border-slate-200 pt-6 mt-6",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 cursor-pointer text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-refresh-line mr-1"}),"Refresh"]}),e.jsxs("button",{className:"flex-1 px-3 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors duration-200 cursor-pointer text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-settings-line mr-1"}),"Settings"]})]})})]})}function x(){const x=n(),{refreshSession:h,isSessionValid:u}=t(),{stats:p,loading:b,error:g,refetch:j}=i(),{activities:v,loading:f,error:N,refetch:y}=r(),{health:w,loading:_,error:A,refetch:k}=l(),C=async()=>{try{u()||await h(),j(),y(),k()}catch(e){}},S=b||f||_;return(g||N||A)&&!S?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx("i",{className:"ri-error-warning-line text-6xl text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Database Connection Error"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"The admin dashboard cannot load due to database policy issues."}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4 text-left",children:[e.jsx("p",{className:"text-sm text-red-700 font-medium mb-2",children:"To fix this:"}),e.jsxs("ol",{className:"text-sm text-red-700 list-decimal list-inside space-y-1",children:[e.jsx("li",{children:"Open your Supabase Dashboard"}),e.jsx("li",{children:"Go to SQL Editor"}),e.jsxs("li",{children:["Copy the content from ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"comprehensive-fix.sql"})]}),e.jsx("li",{children:"Paste and run the script"}),e.jsx("li",{children:"Refresh this page"})]})]}),e.jsx("button",{onClick:C,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):S?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(a,{size:"xl",text:"Loading admin dashboard..."}),e.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"Fetching latest data from database"})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%239C92AC%22%20fill-opacity%3D%220.05%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-40"}),e.jsx("main",{className:"relative pt-20 px-4 sm:px-6 lg:px-8 pb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[e.jsxs("div",{className:"mb-4 sm:mb-0",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-slate-600 text-lg",children:"Welcome back! Here's what's happening with your platform"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-slate-500",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"System Online"})]}),e.jsxs("button",{onClick:C,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center space-x-2",children:[e.jsx("i",{className:"ri-refresh-line text-lg"}),e.jsx("span",{children:"Refresh Data"})]})]})]}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(c,{data:p})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8",children:[e.jsx(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"lg:col-span-2",children:e.jsx(d,{activities:v})}),e.jsxs(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"space-y-8",children:[e.jsx(o,{onAction:e=>{switch(e){case"add_anime":x("/admin/anime");break;case"manage_users":x("/admin/users");break;case"view_reports":y();break;case"system_settings":k()}}}),e.jsx(m,{health:w})]})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Performance"}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-400 to-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-dashboard-line text-white text-lg"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Response Time"}),e.jsx("span",{className:"font-semibold text-green-600",children:"45ms"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Uptime"}),e.jsx("span",{className:"font-semibold text-green-600",children:"99.9%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Active Users"}),e.jsx("span",{className:"font-semibold text-blue-600",children:p?.totalUsers||0})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Content"}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-movie-line text-white text-lg"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Total Anime"}),e.jsx("span",{className:"font-semibold text-purple-600",children:p?.totalAnime||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Episodes"}),e.jsx("span",{className:"font-semibold text-purple-600",children:p?.totalEpisodes||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Reviews"}),e.jsx("span",{className:"font-semibold text-purple-600",children:p?.totalReviews||0})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"System"}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-400 to-red-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-server-line text-white text-lg"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Database"}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-semibold text-green-600",children:"Healthy"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Storage"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"2.4GB"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Reports"}),e.jsx("span",{className:"font-semibold text-orange-600",children:"0"})]})]})]})]})]})})]})}export{x as default};
//# sourceMappingURL=page-BoCZt-Z8.js.map
