{"version":3,"file":"EditEpisodeModal-C5T0fvex.js","sources":["../../src/components/admin/EditEpisodeModal.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { AdminService } from '../../services/adminService';\r\n\r\ninterface EditEpisodeModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n  episode: any;\r\n}\r\n\r\nexport default function EditEpisodeModal({\r\n  isOpen,\r\n  onClose,\r\n  onSuccess,\r\n  episode\r\n}: EditEpisodeModalProps) {\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    duration: '',\r\n    video_url: '',\r\n    thumbnail_url: '',\r\n    episode_number: 1,\r\n    is_premium: false,\r\n    air_date: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (episode && isOpen) {\r\n      setFormData({\r\n        title: episode.title || '',\r\n        description: episode.description || '',\r\n        duration: episode.duration ? Math.floor(episode.duration / 60).toString() : '',\r\n        video_url: episode.video_url || '',\r\n        thumbnail_url: episode.thumbnail_url || '',\r\n        episode_number: episode.episode_number || 1,\r\n        is_premium: episode.is_premium || false,\r\n        air_date: episode.air_date ? new Date(episode.air_date).toISOString().split('T')[0] : ''\r\n      });\r\n    }\r\n  }, [episode, isOpen]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!episode?.id) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const durationInSeconds = parseInt(formData.duration) * 60;\r\n\r\n      await AdminService.updateEpisode(episode.id, {\r\n        title: formData.title,\r\n        description: formData.description,\r\n        duration: durationInSeconds,\r\n        video_url: formData.video_url,\r\n        thumbnail_url: formData.thumbnail_url,\r\n        episode_number: formData.episode_number,\r\n        is_premium: formData.is_premium,\r\n        air_date: formData.air_date\r\n      });\r\n\r\n      onSuccess();\r\n      onClose();\r\n    } catch (err) {\r\n      console.error('Failed to update episode:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to update episode');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { name, value, type } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? (e.target as HTMLInputElement).checked : \r\n              (name === 'episode_number' || name === 'duration') ? parseInt(value) || 0 : value\r\n    }));\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.95 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        exit={{ opacity: 0, scale: 0.95 }}\r\n        className=\"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900\">Edit Episode</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          {error && (\r\n            <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Episode Number */}\r\n            <div>\r\n              <label htmlFor=\"episode_number\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Episode Number\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"episode_number\"\r\n                name=\"episode_number\"\r\n                value={formData.episode_number}\r\n                onChange={handleChange}\r\n                min=\"1\"\r\n                required\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n\r\n            {/* Duration */}\r\n            <div>\r\n              <label htmlFor=\"duration\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Duration (minutes)\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"duration\"\r\n                name=\"duration\"\r\n                value={formData.duration}\r\n                onChange={handleChange}\r\n                min=\"1\"\r\n                required\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n\r\n            {/* Title */}\r\n            <div className=\"md:col-span-2\">\r\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Episode Title\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"title\"\r\n                name=\"title\"\r\n                value={formData.title}\r\n                onChange={handleChange}\r\n                required\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder=\"Enter episode title\"\r\n              />\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div className=\"md:col-span-2\">\r\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Description\r\n              </label>\r\n              <textarea\r\n                id=\"description\"\r\n                name=\"description\"\r\n                value={formData.description}\r\n                onChange={handleChange}\r\n                rows={4}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder=\"Enter episode description\"\r\n              />\r\n            </div>\r\n\r\n            {/* URLs */}\r\n            <div className=\"md:col-span-2\">\r\n              <label htmlFor=\"video_url\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Video URL\r\n              </label>\r\n              <input\r\n                type=\"url\"\r\n                id=\"video_url\"\r\n                name=\"video_url\"\r\n                value={formData.video_url}\r\n                onChange={handleChange}\r\n                required\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder=\"https://example.com/video.mp4\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <label htmlFor=\"thumbnail_url\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Thumbnail URL\r\n              </label>\r\n              <input\r\n                type=\"url\"\r\n                id=\"thumbnail_url\"\r\n                name=\"thumbnail_url\"\r\n                value={formData.thumbnail_url}\r\n                onChange={handleChange}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder=\"https://example.com/thumbnail.jpg\"\r\n              />\r\n            </div>\r\n\r\n            {/* Air Date and Premium */}\r\n            <div className=\"md:col-span-2\">\r\n              <label htmlFor=\"air_date\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Air Date\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                id=\"air_date\"\r\n                name=\"air_date\"\r\n                value={formData.air_date}\r\n                onChange={handleChange}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"is_premium\"\r\n                  name=\"is_premium\"\r\n                  checked={formData.is_premium}\r\n                  onChange={handleChange}\r\n                  className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\r\n                />\r\n                <label htmlFor=\"is_premium\" className=\"text-sm font-medium text-gray-700\">\r\n                  Premium Episode (requires subscription)\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors\"\r\n            >\r\n              {loading ? (\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                  <span>Updating...</span>\r\n                </div>\r\n              ) : (\r\n                'Update Episode'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["EditEpisodeModal","isOpen","onClose","onSuccess","episode","formData","setFormData","useState","title","description","duration","video_url","thumbnail_url","episode_number","is_premium","air_date","loading","setLoading","error","setError","useEffect","Math","floor","toString","Date","toISOString","split","handleChange","e","name","value","type","target","prev","checked","parseInt","jsx","className","children","jsxs","motion","div","initial","opacity","scale","animate","exit","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onSubmit","async","preventDefault","id","durationInSeconds","AdminService","updateEpisode","err","Error","message","htmlFor","onChange","min","required","placeholder","rows","disabled"],"mappings":"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"}