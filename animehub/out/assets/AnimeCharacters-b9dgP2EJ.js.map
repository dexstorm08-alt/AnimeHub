{"version":3,"file":"AnimeCharacters-b9dgP2EJ.js","sources":["../../src/components/feature/AnimeCharacters.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { supabase } from '../../lib/supabase'\n\ninterface Character {\n  id: string\n  name: string\n  name_japanese?: string\n  name_romaji?: string\n  role: string\n  image_url?: string\n  description?: string\n}\n\ninterface AnimeCharactersProps {\n  animeId: string\n}\n\nexport default function AnimeCharacters({ animeId }: AnimeCharactersProps) {\n  const [characters, setCharacters] = useState<Character[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [activeTab, setActiveTab] = useState<'main'>('main')\n\n  useEffect(() => {\n    const fetchCharacters = async () => {\n      try {\n        setLoading(true)\n        setError(null)\n\n        const { data, error: fetchError } = await supabase\n          .from('anime_characters')\n          .select('*')\n          .eq('anime_id', animeId)\n          .order('role', { ascending: true })\n\n        if (fetchError) {\n          console.error('Error fetching characters:', fetchError)\n          setError('Failed to load characters')\n          return\n        }\n\n        setCharacters(data || [])\n      } catch (err) {\n        console.error('Error fetching characters:', err)\n        setError('Failed to load characters')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (animeId) {\n      fetchCharacters()\n    }\n  }, [animeId])\n\n  const getFilteredCharacters = () => {\n    return characters.filter(char => char.role === 'main')\n  }\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case 'main':\n        return 'bg-gradient-to-r from-yellow-400 to-orange-500 text-white'\n      case 'supporting':\n        return 'bg-gradient-to-r from-blue-400 to-purple-500 text-white'\n      case 'antagonist':\n        return 'bg-gradient-to-r from-red-400 to-pink-500 text-white'\n      case 'background':\n        return 'bg-gradient-to-r from-gray-400 to-gray-600 text-white'\n      default:\n        return 'bg-gradient-to-r from-teal-400 to-cyan-500 text-white'\n    }\n  }\n\n  const getRoleIcon = (role: string) => {\n    switch (role) {\n      case 'main':\n        return '‚≠ê'\n      case 'supporting':\n        return 'üë•'\n      case 'antagonist':\n        return 'üòà'\n      case 'background':\n        return 'üë§'\n      default:\n        return 'üé≠'\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-white/20\">\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600\"></div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-white/20\">\n        <div className=\"text-center py-12\">\n          <div className=\"text-red-500 text-xl mb-2\">‚ùå</div>\n          <p className=\"text-red-600\">{error}</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (characters.length === 0) {\n    return (\n      <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-white/20\">\n        <div className=\"text-center py-12\">\n          <div className=\"text-gray-400 text-4xl mb-4\">üé≠</div>\n          <h3 className=\"text-xl font-bold text-gray-600 mb-2\">No Characters Available</h3>\n          <p className=\"text-gray-500\">Character information will appear here once imported.</p>\n        </div>\n      </div>\n    )\n  }\n\n  const filteredCharacters = getFilteredCharacters()\n\n  return (\n    <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-white/20\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8\">\n        <h2 className=\"text-2xl md:text-3xl font-bold text-teal-800 flex items-center\">\n          <i className=\"ri-group-line mr-3 text-pink-500\"></i>\n          Characters\n        </h2>\n        <div className=\"text-sm text-gray-600\">\n          {characters.length} characters\n        </div>\n      </div>\n\n      {/* Main Characters Only */}\n      <div className=\"flex items-center gap-2 mb-8\">\n        <div className=\"px-4 py-2 rounded-xl font-medium bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-lg flex items-center\">\n          <span className=\"mr-2\">‚≠ê</span>\n          Main Characters\n        </div>\n        <div className=\"text-sm text-gray-600\">\n          ({getFilteredCharacters().length} main characters)\n        </div>\n      </div>\n\n      {/* Characters Grid */}\n      <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -20 }}\n          transition={{ duration: 0.3 }}\n          className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\"\n        >\n          {filteredCharacters.map((character, index) => (\n            <motion.div\n              key={character.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.3, delay: index * 0.1 }}\n              className=\"bg-white/60 backdrop-blur-sm rounded-xl p-6 shadow-lg border border-white/30 hover:shadow-xl transition-all duration-300 group\"\n            >\n              {/* Character Image */}\n              <div className=\"relative mb-4\">\n                <div className=\"w-24 h-24 mx-auto rounded-full overflow-hidden bg-gradient-to-br from-teal-200 to-cyan-300\">\n                  {character.image_url ? (\n                    <img\n                      src={character.image_url}\n                      alt={character.name}\n                      className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300\"\n                      onError={(e) => {\n                        const target = e.target as HTMLImageElement\n                        target.style.display = 'none'\n                        target.nextElementSibling?.classList.remove('hidden')\n                      }}\n                    />\n                  ) : null}\n                  <div className={`w-full h-full flex items-center justify-center text-3xl ${character.image_url ? 'hidden' : ''}`}>\n                    üé≠\n                  </div>\n                </div>\n                \n                {/* Role Badge */}\n                <div className={`absolute -top-2 -right-2 px-2 py-1 rounded-full text-xs font-bold ${getRoleColor(character.role)}`}>\n                  {getRoleIcon(character.role)} {character.role}\n                </div>\n              </div>\n\n              {/* Character Info */}\n              <div className=\"text-center\">\n                <h3 className=\"font-bold text-gray-800 text-lg mb-1 group-hover:text-teal-600 transition-colors\">\n                  {character.name}\n                </h3>\n                \n                {character.name_japanese && character.name_japanese !== character.name && (\n                  <p className=\"text-gray-600 text-sm mb-2\">{character.name_japanese}</p>\n                )}\n                \n                {character.name_romaji && (\n                  <p className=\"text-gray-500 text-xs mb-3 italic\">\n                    Also known as: {character.name_romaji}\n                  </p>\n                )}\n\n                {character.description && (\n                  <div className=\"text-xs text-gray-600 line-clamp-3\">\n                    {character.description}\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          ))}\n      </motion.div>\n\n      {filteredCharacters.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"text-gray-400 text-4xl mb-4\">‚≠ê</div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No main characters found</h3>\n          <p className=\"text-gray-500\">\n            No main characters found for this anime.\n          </p>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["AnimeCharacters","animeId","characters","setCharacters","useState","loading","setLoading","error","setError","activeTab","setActiveTab","useEffect","async","data","fetchError","supabase","from","select","eq","order","ascending","err","fetchCharacters","getFilteredCharacters","filter","char","role","getRoleColor","getRoleIcon","jsx","className","children","jsxs","length","filteredCharacters","motion","div","initial","opacity","y","animate","exit","transition","duration","map","character","index","delay","image_url","src","alt","name","onError","e","target","style","display","nextElementSibling","classList","remove","name_japanese","name_romaji","description","id"],"mappings":"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"}