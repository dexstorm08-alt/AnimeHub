import{j as e,m as r}from"./animation-jvELU4qo.js";import{r as s}from"./react-vendor-DxNDjNG-.js";import{A as i}from"./admin-I3YcsrSP.js";import"./ui-components-C5QItHIj.js";import"./services-By9PCRKQ.js";function a({isOpen:a,onClose:t,onSuccess:l,episode:d}){const[o,n]=s.useState({title:"",description:"",duration:"",video_url:"",thumbnail_url:"",episode_number:1,is_premium:!1,air_date:""}),[m,u]=s.useState(!1),[c,p]=s.useState(null);s.useEffect(()=>{d&&a&&n({title:d.title||"",description:d.description||"",duration:d.duration?Math.floor(d.duration/60).toString():"",video_url:d.video_url||"",thumbnail_url:d.thumbnail_url||"",episode_number:d.episode_number||1,is_premium:d.is_premium||!1,air_date:d.air_date?new Date(d.air_date).toISOString().split("T")[0]:""})},[d,a]);const b=e=>{const{name:r,value:s,type:i}=e.target;n(a=>({...a,[r]:"checkbox"===i?e.target.checked:"episode_number"===r||"duration"===r?parseInt(s)||0:s}))};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Episode"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),d?.id)try{u(!0),p(null);const e=60*parseInt(o.duration);await i.updateEpisode(d.id,{title:o.title,description:o.description,duration:e,video_url:o.video_url,thumbnail_url:o.thumbnail_url,episode_number:o.episode_number,is_premium:o.is_premium,air_date:o.air_date}),l(),t()}catch(r){p(r instanceof Error?r.message:"Failed to update episode")}finally{u(!1)}},className:"p-6",children:[c&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:c}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"episode_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Episode Number"}),e.jsx("input",{type:"number",id:"episode_number",name:"episode_number",value:o.episode_number,onChange:b,min:"1",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),e.jsx("input",{type:"number",id:"duration",name:"duration",value:o.duration,onChange:b,min:"1",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Episode Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:o.title,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter episode title"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:o.description,onChange:b,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter episode description"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"video_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL"}),e.jsx("input",{type:"url",id:"video_url",name:"video_url",value:o.video_url,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/video.mp4"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"thumbnail_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Thumbnail URL"}),e.jsx("input",{type:"url",id:"thumbnail_url",name:"thumbnail_url",value:o.thumbnail_url,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/thumbnail.jpg"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"air_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Air Date"}),e.jsx("input",{type:"date",id:"air_date",name:"air_date",value:o.air_date,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"is_premium",name:"is_premium",checked:o.is_premium,onChange:b,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_premium",className:"text-sm font-medium text-gray-700",children:"Premium Episode (requires subscription)"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,disabled:m,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:m?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating..."})]}):"Update Episode"})]})]})]})}):null}export{a as default};
//# sourceMappingURL=EditEpisodeModal-C5T0fvex.js.map
