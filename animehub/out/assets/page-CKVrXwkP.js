const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/admin-I3YcsrSP.js","assets/animation-jvELU4qo.js","assets/react-vendor-DxNDjNG-.js","assets/ui-components-C5QItHIj.js","assets/services-By9PCRKQ.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./ui-components-C5QItHIj.js";import{j as s,m as t}from"./animation-jvELU4qo.js";import{r as l}from"./react-vendor-DxNDjNG-.js";import{a,E as r,b as i,c as n,S as d,A as c}from"./admin-I3YcsrSP.js";import o from"./AddEpisodeModal--8b3T5Z2.js";import{C as x}from"./ConfirmationDialog-YEhSZHza.js";import m from"./EditEpisodeModal-C5T0fvex.js";import h from"./LargeAnimeScraper-DnFT-T51.js";import"./services-By9PCRKQ.js";function u(){const[u,p]=l.useState([]),[b,g]=l.useState(!0),[j,f]=l.useState(null),[y,w]=l.useState(1),[N,v]=l.useState(0),[k,S]=l.useState("all"),[A,C]=l.useState("all"),[E,T]=l.useState(""),[D,L]=l.useState(new Set),[F,$]=l.useState(null),[_,M]=l.useState(null),[P,z]=l.useState(!1),[O,I]=l.useState(null),[R,H]=l.useState(null),[V,G]=l.useState(!1),[U,B]=l.useState(!1),[W,Q]=l.useState(!1),[q,J]=l.useState(null),[K,X]=l.useState([]),[Y,Z]=l.useState({}),[ee,se]=l.useState(!1),[te,le]=l.useState(new Set),[ae,re]=l.useState([]),[ie,ne]=l.useState(null),[de,ce]=l.useState(!1),[oe,xe]=l.useState(null),[me,he]=l.useState(!1),[ue,pe]=l.useState(null),[be,ge]=l.useState(!1),[je,fe]=l.useState(null),[ye,we]=l.useState(!1),[Ne,ve]=l.useState(!1),[ke,Se]=l.useState(!1),[Ae,Ce]=l.useState([]),[Ee,Te]=l.useState([]),[De,Le]=l.useState(null),[Fe,$e]=l.useState(null),[_e,Me]=l.useState(!1),[Pe,ze]=l.useState(null),Oe=async(e=1)=>{try{g(!0),f(null),M(null);const s=await c.getAllAnime(e,20);p(s.anime),v(s.total),w(e),setTimeout(()=>{if(s.anime.length>0){const e=s.anime.slice(0,3).map(e=>e.id).filter(e=>!Y[e]&&!te.has(e));re(s=>[...s,...e])}},300)}catch(s){f(s instanceof Error?s.message:"Failed to fetch anime")}finally{g(!1)}};l.useEffect(()=>{if(ae.length>0){const e=setTimeout(async()=>{const e=ae[0];!e||Y[e]||te.has(e)||await Be(e),re(e=>e.slice(1))},300);return()=>clearTimeout(e)}},[ae,Y,te]),l.useEffect(()=>{Oe()},[k,A,E]);const Ie=async(e,s)=>{try{$(e),f(null),M(null),await c.updateAnimeStatus(e,s),await Oe(y),M(`Anime status updated to ${s} successfully!`),setTimeout(()=>M(null),3e3)}catch(t){f(t instanceof Error?t.message:"Failed to update anime status")}finally{$(null)}},Re=(e,s)=>{xe({title:"Delete Anime",message:`Are you sure you want to delete "${s}"? This will permanently delete:\n      \n• All episodes and their data\n• All user reviews and ratings\n• All user watch progress and favorites\n• All content reports\n• The anime itself\n\nThis action cannot be undone.`,confirmText:"Delete Anime",type:"danger",onConfirm:async()=>{try{$(e),f(null),M(null),await c.deleteAnime(e),await Oe(y),M(`Anime "${s}" deleted successfully!`),setTimeout(()=>M(null),3e3)}catch(t){f(t instanceof Error?t.message:"Failed to delete anime")}finally{$(null),ce(!1)}}}),ce(!0)},He=async e=>{const s=Array.from(D);if(0!==s.length)try{if($("bulk"),f(null),M(null),"delete"===e)return xe({title:"Delete Multiple Anime",message:`Are you sure you want to delete ${s.length} anime? This will permanently delete:\n\n• All episodes and their data for each anime\n• All user reviews and ratings\n• All user watch progress and favorites\n• All content reports\n• The anime themselves\n\nThis action cannot be undone.`,confirmText:`Delete ${s.length} Anime`,type:"danger",onConfirm:async()=>{await c.bulkDeleteAnime(s),M(`${s.length} anime deleted successfully!`),await Oe(y),L(new Set),ce(!1)}}),void ce(!0);await c.bulkUpdateAnimeStatus(s,e),M(`${s.length} anime status updated to ${e}!`),await Oe(y),L(new Set),setTimeout(()=>M(null),3e3)}catch(t){f(t instanceof Error?t.message:"Failed to perform bulk action")}finally{$(null)}},Ve=()=>{z(!1),I(null),H(null),X([])},Ge=e=>{J(e),Q(!0)},Ue=async e=>{try{if(Y[e])return void X(Y[e]);se(!0);const s=await c.getAnimeEpisodes(e);X(s),Z(t=>({...t,[e]:s}))}catch(s){f("Failed to fetch episodes")}finally{se(!1)}},Be=async e=>{try{if(Y[e]||te.has(e))return;le(s=>new Set(s).add(e));const s=c.getAnimeEpisodes(e),t=new Promise((e,s)=>setTimeout(()=>s(new Error("Timeout")),5e3)),l=await Promise.race([s,t]);Z(s=>({...s,[e]:l}))}catch(s){le(s=>{const t=new Set(s);return t.delete(e),t})}},We=e=>{fe(e),ge(!0)},Qe=async s=>{try{f(null),M(null);const{HiAnimeScraperService:t}=await e(async()=>{const{HiAnimeScraperService:e}=await import("./admin-I3YcsrSP.js").then(e=>e.h);return{HiAnimeScraperService:e}},__vite__mapDeps([0,1,2,3,4])),l=await t.scrapeAllEpisodes(s.title,{animeId:s.id,maxEpisodes:s.total_episodes||50});l.success&&l.data?(Ce(l.data.scrapedEpisodes||[]),Te(l.data.failedEpisodes||[]),Le(l.data.summary||{total:0,successful:0,failed:0,embeddingProtected:0}),$e(s),Se(!0),M(`✅ Scraped ${l.data.summary?.successful||0} episodes successfully!`),setTimeout(()=>M(null),5e3)):(f(`❌ Scraping failed: ${l.error}`),setTimeout(()=>f(null),1e4))}catch(t){f(`❌ Error: ${t.message}`),setTimeout(()=>f(null),1e4)}},qe=e=>{ze(e),Me(!0)},Je=()=>{Me(!1),ze(null),Oe(y)},Ke=u.filter(e=>{const s="all"===k||e.status===k,t="all"===A||e.genres&&e.genres.some(e=>e.toLowerCase().includes(A.toLowerCase())),l=""===E||e.title.toLowerCase().includes(E.toLowerCase())||e.description&&e.description.toLowerCase().includes(E.toLowerCase());return s&&t&&l}),Xe=Math.ceil(N/20),Ye=e=>{switch(e){case"published":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Ze=e=>{switch(e){case"published":return"✅";case"pending":return"⏳";case"draft":return"📝";default:return"📄"}},es=e=>{switch(e.toLowerCase()){case"action":return"⚔️";case"romance":return"💕";case"comedy":return"😂";case"drama":return"🎭";case"fantasy":return"🧙‍♂️";case"sci-fi":return"🚀";case"horror":return"👻";case"slice of life":return"🌸";default:return"🎬"}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Anime Management"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your anime content library"})]}),s.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[s.jsxs("button",{onClick:()=>B(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:"🎬"}),s.jsx("span",{children:"Add New Anime"})]}),s.jsxs("button",{onClick:()=>we(!0),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:"📥"}),s.jsx("span",{children:"Import Anime"})]}),s.jsxs("button",{onClick:()=>ve(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:"🎬"}),s.jsx("span",{children:"Episode Scraper"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 text-lg",children:"🎬"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Anime"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 text-lg",children:"✅"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Published"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.filter(e=>"published"===e.status).length})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-yellow-600 text-lg",children:"⏳"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.filter(e=>"pending"===e.status).length})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-gray-600 text-lg",children:"📝"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Drafts"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.filter(e=>"draft"===e.status).length})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 mb-6",children:[j&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:j}),_&&s.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:_}),Object.keys(Y).length>0&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-300 border-t-blue-600 rounded-full animate-spin"}),s.jsxs("span",{className:"text-sm",children:["⚡ Preloaded episodes for ",Object.keys(Y).length,' anime - Click "View Details" for instant loading!']})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Anime"}),s.jsx("input",{type:"text",id:"search",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by title or description...",value:E,onChange:e=>T(e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"statusFilter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),s.jsxs("select",{id:"statusFilter",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:k,onChange:e=>S(e.target.value),children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"draft",children:"Draft"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"genreFilter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Genre"}),s.jsxs("select",{id:"genreFilter",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:A,onChange:e=>C(e.target.value),children:[s.jsx("option",{value:"all",children:"All Genres"}),s.jsx("option",{value:"action",children:"Action"}),s.jsx("option",{value:"romance",children:"Romance"}),s.jsx("option",{value:"comedy",children:"Comedy"}),s.jsx("option",{value:"drama",children:"Drama"}),s.jsx("option",{value:"fantasy",children:"Fantasy"}),s.jsx("option",{value:"sci-fi",children:"Sci-Fi"}),s.jsx("option",{value:"horror",children:"Horror"}),s.jsx("option",{value:"slice of life",children:"Slice of Life"})]})]})]})]}),D.size>0&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-blue-800 font-medium",children:[D.size," anime selected"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>He("published"),disabled:"bulk"===F,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors text-sm",children:"bulk"===F?"Updating...":"Publish Selected"}),s.jsx("button",{onClick:()=>He("pending"),disabled:"bulk"===F,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 transition-colors text-sm",children:"bulk"===F?"Updating...":"Mark Pending"}),s.jsx("button",{onClick:()=>He("draft"),disabled:"bulk"===F,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 transition-colors text-sm",children:"bulk"===F?"Updating...":"Mark Draft"}),s.jsx("button",{onClick:()=>He("delete"),disabled:"bulk"===F,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors text-sm",children:"bulk"===F?"Deleting...":"Delete Selected"}),s.jsx("button",{onClick:()=>L(new Set),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Clear Selection"})]})]})}),!b&&Ke.length>0&&s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:D.size===Ke.length&&Ke.length>0,onChange:e=>{if(e.target.checked){const e=new Set(Ke.map(e=>e.id));L(e)}else L(new Set)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Select All (",Ke.length," anime)"]})]}),s.jsx("div",{className:"text-sm text-gray-500",children:D.size>0&&`${D.size} selected`})]})}),b?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):s.jsxs("div",{className:"space-y-4",children:[Ke.map(e=>s.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("img",{className:"h-24 w-18 rounded-lg object-cover shadow-md",src:e.poster_url||e.thumbnail||"/placeholder-anime.jpg",alt:e.title,onError:e=>{e.target.src="https://via.placeholder.com/150x200/6366f1/ffffff?text=Anime"}})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.title}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${Ye(e.status)}`,children:[Ze(e.status)," ",e.status]}),Y[e.id]&&s.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:["⚡ ",Y[e.id].length," episodes ready"]})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description||"No description available"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-lg",children:"🎬"}),s.jsxs("span",{children:[e.episode_count||0," episodes"]})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-lg",children:"⭐"}),s.jsxs("span",{children:["Rating: ",e.average_rating||"N/A"]})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-lg",children:"👀"}),s.jsxs("span",{children:[e.views?.toLocaleString()||"0"," views"]})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-lg",children:"📅"}),s.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]}),e.genres&&e.genres.length>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-lg",children:"🏷️"}),s.jsxs("div",{className:"flex space-x-1",children:[e.genres.slice(0,3).map((e,t)=>s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:es(e)}),s.jsx("span",{children:e})]},t)),e.genres.length>3&&s.jsxs("span",{className:"text-gray-400",children:["+",e.genres.length-3," more"]})]})]})]})]})]}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("select",{value:e.status,onChange:s=>Ie(e.id,s.target.value),disabled:F===e.id,className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50",children:[s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"draft",children:"Draft"})]}),F===e.id&&s.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>(async e=>{I(e),z(!0),Y[e.id]?X(Y[e.id]):X([]),G(!0);try{const s=await c.getAnimeAnalytics(e.id);H(s),Y[e.id]||Ue(e.id)}catch(s){f("Failed to fetch anime details")}finally{G(!1)}})(e),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"View Details"}),s.jsx("button",{onClick:()=>We(e),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Edit"}),s.jsx("button",{onClick:()=>Ge(e),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Add Episode"}),s.jsxs("button",{onClick:()=>Qe(e),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm flex items-center space-x-1",children:[s.jsx("span",{children:"🎬"}),s.jsx("span",{children:"Scrap Episodes"})]}),s.jsxs("button",{onClick:()=>qe(e),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center space-x-1",children:[s.jsx("span",{children:"🚀"}),s.jsx("span",{children:"Large Scrape"})]}),s.jsx("button",{onClick:()=>Re(e.id,e.title),disabled:F===e.id,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors text-sm",children:F===e.id?"Deleting...":"Delete"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:D.has(e.id),onChange:s=>{const t=new Set(D);s.target.checked?t.add(e.id):t.delete(e.id),L(t)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Select for bulk action"})]})]})]})},e.id)),0===Ke.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"🎬"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No anime found"}),s.jsx("p",{className:"text-gray-500",children:E||"all"!==k||"all"!==A?"No anime match your current filters.":"There are no anime to display."})]})]}),Xe>1&&s.jsxs("div",{className:"flex justify-center mt-8 space-x-2",children:[s.jsx("button",{onClick:()=>Oe(y-1),disabled:1===y||b,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),Array.from({length:Xe},(e,s)=>s+1).map(e=>s.jsx("button",{onClick:()=>Oe(e),disabled:y===e||b,className:"px-4 py-2 rounded-lg "+(y===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},e)),s.jsx("button",{onClick:()=>Oe(y+1),disabled:y===Xe||b,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50",children:"Next"})]})]}),P&&O&&s.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-900/20 via-purple-900/20 to-pink-900/20 backdrop-blur-md flex items-center justify-center z-50 p-4",children:s.jsxs(t.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[s.jsx("h2",{className:"text-2xl font-bold text-white drop-shadow-lg",children:"Anime Details"}),s.jsx("button",{onClick:Ve,className:"text-white/70 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start space-x-6 mb-6",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("img",{className:"h-48 w-36 rounded-xl object-cover border-4 border-white/30 shadow-xl",src:O.poster_url||O.thumbnail||"/placeholder-anime.jpg",alt:O.title,onError:e=>{e.target.src="https://via.placeholder.com/300x400/6366f1/ffffff?text=Anime"}})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("h3",{className:"text-3xl font-bold text-white drop-shadow-lg",children:O.title}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium backdrop-blur-sm border border-white/20 ${Ye(O.status)}`,children:[Ze(O.status)," ",O.status]})]}),s.jsx("p",{className:"text-white/80 text-lg mb-4 drop-shadow-sm",children:O.description||"No description available"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:[s.jsx("span",{className:"text-white/70",children:"🎬"}),s.jsxs("span",{className:"text-white/90",children:[O.episode_count||0," episodes"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:[s.jsx("span",{className:"text-white/70",children:"⭐"}),s.jsxs("span",{className:"text-white/90",children:["Rating: ",V?"Loading...":R?.analytics?.averageRating||"N/A",!V&&R?.analytics?.totalReviews>0&&s.jsxs("span",{className:"text-white/60",children:["(",R.analytics.totalReviews," reviews)"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:[s.jsx("span",{className:"text-white/70",children:"👀"}),s.jsxs("span",{className:"text-white/90",children:[V?"Loading...":R?.analytics?.views||0," views",!V&&R?.analytics?.completedViews>0&&s.jsxs("span",{className:"text-white/60",children:[" (",R.analytics.completedViews," completed)"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:[s.jsx("span",{className:"text-white/70",children:"📅"}),s.jsx("span",{className:"text-white/90",children:new Date(O.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:[s.jsx("span",{className:"text-white/70",children:"📊"}),s.jsxs("span",{className:"text-white/90",children:[V?"Loading...":R?.analytics?.reports||0," reports"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:[s.jsx("span",{className:"text-white/70",children:"🆔"}),s.jsx("span",{className:"font-mono text-xs text-white/90",children:O.id})]}),O.genres&&O.genres.length>0&&s.jsxs("div",{className:"col-span-2 bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-white/70",children:"🏷️"}),s.jsx("span",{className:"text-white/90 font-medium",children:"Genres:"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:O.genres.map((e,t)=>s.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 bg-white/20 rounded-md text-white/90 text-xs",children:[s.jsx("span",{children:es(e)}),s.jsx("span",{children:e})]},t))})]})]})]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-white drop-shadow-lg mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Change Status"}),s.jsxs("select",{value:O.status,onChange:e=>{Ie(O.id,e.target.value),I({...O,status:e.target.value})},disabled:F===O.id,className:"w-full px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white/30 focus:border-white/30 disabled:opacity-50",children:[s.jsx("option",{value:"published",className:"bg-gray-800 text-white",children:"Published"}),s.jsx("option",{value:"pending",className:"bg-gray-800 text-white",children:"Pending"}),s.jsx("option",{value:"draft",className:"bg-gray-800 text-white",children:"Draft"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Actions"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>{We(O),Ve()},className:"px-4 py-2 bg-purple-500/80 backdrop-blur-sm text-white rounded-lg hover:bg-purple-600/80 transition-all duration-200 border border-purple-400/30 hover:border-purple-400/50",children:"Edit Anime"}),s.jsx("button",{onClick:()=>{Ge(O),Ve()},className:"px-4 py-2 bg-green-500/80 backdrop-blur-sm text-white rounded-lg hover:bg-green-600/80 transition-all duration-200 border border-green-400/30 hover:border-green-400/50",children:"Add Episode"}),s.jsxs("button",{onClick:()=>{Qe(O)},className:"px-4 py-2 bg-orange-500/80 backdrop-blur-sm text-white rounded-lg hover:bg-orange-600/80 transition-all duration-200 border border-orange-400/30 hover:border-orange-400/50 flex items-center space-x-1",children:[s.jsx("span",{children:"🎬"}),s.jsx("span",{children:"Scrap Episodes"})]}),s.jsxs("button",{onClick:()=>{qe(O)},className:"px-4 py-2 bg-purple-500/80 backdrop-blur-sm text-white rounded-lg hover:bg-purple-600/80 transition-all duration-200 border border-purple-400/30 hover:border-purple-400/50 flex items-center space-x-1",children:[s.jsx("span",{children:"🚀"}),s.jsx("span",{children:"Large Scrape"})]}),s.jsx("button",{onClick:()=>{Re(O.id,O.title),Ve()},disabled:F===O.id,className:"px-4 py-2 bg-red-500/80 backdrop-blur-sm text-white rounded-lg hover:bg-red-600/80 disabled:opacity-50 transition-all duration-200 border border-red-400/30 hover:border-red-400/50",children:"Delete Anime"}),s.jsx("button",{onClick:Ve,className:"px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-lg hover:bg-white/20 transition-all duration-200 border border-white/20 hover:border-white/30",children:"Close"})]})]})]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-lg font-semibold text-white drop-shadow-lg",children:"Episodes Management"}),Y[O?.id]&&s.jsxs("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-medium border border-green-500/30",children:["⚡ ",Y[O.id].length," episodes loaded instantly"]})]}),s.jsx("div",{className:"space-y-3",children:ee?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-white/60 text-sm",children:"Loading episodes..."})]}):0===K.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-white/40 text-4xl mb-2",children:"📺"}),s.jsx("p",{className:"text-white/60",children:"No episodes yet"}),s.jsx("p",{className:"text-white/40 text-sm",children:"Add the first episode to get started"})]}):K.map(e=>s.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center text-white font-bold text-sm",children:e.episode_number}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-white font-medium",children:e.title}),s.jsxs("p",{className:"text-white/60 text-sm",children:["Duration: ",e.duration?`${Math.floor(e.duration/60)}:${(e.duration%60).toString().padStart(2,"0")}`:"N/A"]}),s.jsxs("p",{className:"text-white/40 text-xs",children:["Added: ",new Date(e.created_at).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>(e=>{pe(e),he(!0)})(e),className:"px-3 py-1 bg-blue-500/80 backdrop-blur-sm text-white rounded-md hover:bg-blue-600/80 transition-all duration-200 text-sm",children:"Edit"}),s.jsx("button",{onClick:()=>{return s=e.id,t=e.title,xe({title:"Delete Episode",message:`Are you sure you want to delete "${t}"? This action cannot be undone and will also delete all associated user progress and reviews.`,confirmText:"Delete Episode",type:"danger",onConfirm:async()=>{try{ne(s),await c.deleteEpisode(s),await Ue(O.id),Z(e=>({...e,[O.id]:void 0})),M(`Episode "${t}" deleted successfully!`),setTimeout(()=>M(null),3e3)}catch(e){f("Failed to delete episode")}finally{ne(null),ce(!1)}}}),void ce(!0);var s,t},disabled:ie===e.id,className:"px-3 py-1 bg-red-500/80 backdrop-blur-sm text-white rounded-md hover:bg-red-600/80 disabled:opacity-50 transition-all duration-200 text-sm",children:ie===e.id?"Deleting...":"Delete"})]})]})},e.id))})]})]})]})}),s.jsx(a,{isOpen:U,onClose:()=>B(!1),onSuccess:()=>{B(!1),Oe(y),M("Anime created successfully!"),setTimeout(()=>M(null),3e3)}}),q&&s.jsx(o,{isOpen:W,onClose:()=>{Q(!1),J(null)},onSuccess:async()=>{Q(!1),J(null),Oe(y),O&&(await Ue(O.id),Z(e=>({...e,[O.id]:void 0}))),M("Episode created successfully!"),setTimeout(()=>M(null),3e3)},animeId:q.id,animeTitle:q.title,nextEpisodeNumber:(q.episode_count||0)+1}),s.jsx(x,{isOpen:de,onClose:()=>ce(!1),onConfirm:oe?.onConfirm||(()=>{}),title:oe?.title||"",message:oe?.message||"",confirmText:oe?.confirmText||"Confirm",type:oe?.type||"danger",isLoading:null!==F||null!==ie}),s.jsx(m,{isOpen:me,onClose:()=>{he(!1),pe(null)},onSuccess:async()=>{he(!1),pe(null),O&&(await Ue(O.id),Z(e=>({...e,[O.id]:void 0}))),M("Episode updated successfully!"),setTimeout(()=>M(null),3e3)},episode:ue}),s.jsx(r,{isOpen:be,onClose:()=>{ge(!1),fe(null)},onSuccess:async()=>{ge(!1),fe(null),await Oe(y),M("Anime updated successfully!"),setTimeout(()=>M(null),3e3)},anime:je}),ye&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Anime Data Importer"}),s.jsx("button",{onClick:()=>we(!1),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:s.jsx(i,{})})]})}),Ne&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"HiAnime.do Scraper"}),s.jsx("button",{onClick:()=>ve(!1),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:s.jsx(n,{})})]})}),ke&&Fe&&s.jsx(d,{isOpen:ke,onClose:()=>{Se(!1),Ce([]),Te([]),Le(null),$e(null),Oe(y)},animeId:Fe.id,animeTitle:Fe.title,scrapedEpisodes:Ae,failedEpisodes:Ee,summary:De,onEpisodesAdded:()=>{Y[Fe.id]&&(delete Y[Fe.id],Z({...Y}))}}),_e&&Pe&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"🚀 Large Anime Scraper"}),s.jsx("button",{onClick:Je,className:"text-gray-500 hover:text-gray-700 transition-colors",children:s.jsx("i",{className:"ri-close-line text-2xl"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:s.jsx(h,{animeId:Pe.id,animeTitle:Pe.title,totalEpisodes:Pe.total_episodes||1e3,onScrapingComplete:()=>{Je(),M("Large scraping completed successfully!"),setTimeout(()=>M(null),5e3)}})})]})})]})}export{u as default};
//# sourceMappingURL=page-CKVrXwkP.js.map
